# sprite tilesets
.eqv PADDLE_TILESET_START 0
.eqv PADDLE_TILESET_SIZE 3
.eqv PADDLE_TILE_LEFT 0
.eqv PADDLE_TILE_MID 1
.eqv PADDLE_TILE_RIGHT 2
.eqv PADDLE_FLAGS 0x01

.eqv BALL_TILESET_START 3
.eqv BALL_TILESET_SIZE 1
.eqv BALL_TILE 3
.eqv BALL_FLAGS 0x11

# tilemap tilesets
.eqv EMPTY_TILE 0
.eqv BLOCK_TILESET_START 1
.eqv BLOCK_TILESET_SIZE 2
.eqv BLOCK_TILE 1

# palettes
.eqv PADDLE_PALETTE_START 0x00
.eqv PADDLE_PALETTE_SIZE 6
.eqv BALL_PALETTE_START 0x10
.eqv BALL_PALETTE_SIZE 6
# block palette starts are in the block_palette_starts array
.eqv N_BLOCK_PALETTES 6
.eqv BLOCK_PALETTE_SIZE 5

.text

load_game_graphics:
push ra
push s0
	# paddle graphics
	la a0, paddle_tileset
	li a1, PADDLE_TILESET_START
	li a2, PADDLE_TILESET_SIZE
	jal display_load_sprite_gfx

	la a0, paddle_palette
	li a1, PADDLE_PALETTE_START
	li a2, PADDLE_PALETTE_SIZE
	jal display_load_palette

	# ball graphics
	la a0, ball_tileset
	li a1, BALL_TILESET_START
	li a2, BALL_TILESET_SIZE
	jal display_load_sprite_gfx

	la a0, ball_palette
	li a1, BALL_PALETTE_START
	li a2, BALL_PALETTE_SIZE
	jal display_load_palette

	# block graphics - only one set of tiles, but 6 palettes on different rows
	la a0, block_tileset
	li a1, BLOCK_TILESET_START
	li a2, BLOCK_TILESET_SIZE
	jal display_load_tm_gfx

	li s0, 0
	_loop:
		la  a0, block_palettes
		mul t0, s0, BLOCK_PALETTE_SIZE
		mul t0, t0, 4
		add a0, a0, t0
		lbu a1, block_palette_starts(s0)
		li  a2, BLOCK_PALETTE_SIZE
		jal display_load_palette
	add s0, s0, 1
	blt s0, N_BLOCK_PALETTES, _loop
pop s0
pop ra
jr ra

.data

block_palette_starts: .byte 0x20 0x30 0x40 0x50 0x60 0x70

paddle_palette: .word
	0x000000 0x000000 0x464646 0xA2A2A2 0xD6D6D6 0xFFFFFF
ball_palette: .word
	0x000000 0x000000 0x464646 0xA2A2A2 0xD6D6D6 0xFFFFFF
block_palettes: .word
	0x000000 0x630B0B 0x8B1717 0xCB4040 0xE27373 # red
	0x000000 0x63460B 0x8B6417 0xCB9D40 0xE2BD73 # yellow
	0x000000 0x2B630B 0x428B17 0x73CB40 0x9CE273 # green
	0x000000 0x0B3E63 0x175B8B 0x4091CB 0x73B4E2 # blue
	0x000000 0x3A0B63 0x55178B 0x8A40CB 0xAE73E2 # purple
	0x000000 0x630B44 0x8B1762 0xCB409A 0xE273BB # pink

paddle_tileset: .byte
	# Tile 0
	0x00 0x00 0x01 0x01 0x01 0x01 0x01 0x01
	0x00 0x01 0x05 0x05 0x05 0x05 0x05 0x05
	0x01 0x04 0x04 0x04 0x04 0x04 0x04 0x04
	0x01 0x03 0x03 0x03 0x03 0x03 0x03 0x03
	0x00 0x01 0x02 0x02 0x02 0x02 0x02 0x02
	0x00 0x00 0x01 0x01 0x01 0x01 0x01 0x01
	0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00
	0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00

	# Tile 1
	0x01 0x01 0x01 0x01 0x01 0x01 0x01 0x01
	0x05 0x05 0x05 0x05 0x05 0x05 0x05 0x05
	0x04 0x04 0x04 0x04 0x04 0x04 0x04 0x04
	0x03 0x03 0x03 0x03 0x03 0x03 0x03 0x03
	0x02 0x02 0x02 0x02 0x02 0x02 0x02 0x02
	0x01 0x01 0x01 0x01 0x01 0x01 0x01 0x01
	0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00
	0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00

	# Tile 2
	0x01 0x01 0x01 0x01 0x01 0x01 0x00 0x00
	0x05 0x05 0x05 0x05 0x05 0x05 0x01 0x00
	0x04 0x04 0x04 0x04 0x04 0x04 0x04 0x01
	0x03 0x03 0x03 0x03 0x03 0x03 0x03 0x01
	0x02 0x02 0x02 0x02 0x02 0x02 0x01 0x00
	0x01 0x01 0x01 0x01 0x01 0x01 0x00 0x00
	0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00
	0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00

.align 2
ball_tileset: .byte
	# Tile 0
	0x00 0x00 0x01 0x01 0x00 0x00 0x00 0x00
	0x00 0x01 0x04 0x03 0x01 0x00 0x00 0x00
	0x01 0x04 0x05 0x04 0x02 0x01 0x00 0x00
	0x01 0x03 0x04 0x03 0x02 0x01 0x00 0x00
	0x00 0x01 0x02 0x02 0x01 0x00 0x00 0x00
	0x00 0x00 0x01 0x01 0x00 0x00 0x00 0x00
	0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00
	0x00 0x00 0x00 0x00 0x00 0x00 0x00 0x00

.align 2
block_tileset: .byte
	# Tile 0
	0x02 0x04 0x04 0x04 0x04 0x04 0x04 0x04
	0x02 0x02 0x04 0x04 0x04 0x04 0x04 0x04
	0x02 0x02 0x03 0x03 0x03 0x03 0x03 0x03
	0x02 0x02 0x03 0x03 0x03 0x03 0x03 0x03
	0x02 0x02 0x03 0x03 0x03 0x03 0x03 0x03
	0x02 0x02 0x03 0x03 0x03 0x03 0x03 0x03
	0x02 0x02 0x01 0x01 0x01 0x01 0x01 0x01
	0x02 0x01 0x01 0x01 0x01 0x01 0x01 0x01

	# Tile 1
	0x04 0x04 0x04 0x04 0x04 0x04 0x04 0x02
	0x04 0x04 0x04 0x04 0x04 0x04 0x02 0x02
	0x03 0x03 0x03 0x03 0x03 0x03 0x02 0x02
	0x03 0x03 0x03 0x03 0x03 0x03 0x02 0x02
	0x03 0x03 0x03 0x03 0x03 0x03 0x02 0x02
	0x03 0x03 0x03 0x03 0x03 0x03 0x02 0x02
	0x01 0x01 0x01 0x01 0x01 0x01 0x02 0x02
	0x01 0x01 0x01 0x01 0x01 0x01 0x01 0x02

.text